

<mat-expansion-panel >
  <mat-expansion-panel-header>
    <mat-panel-title> New Book Form </mat-panel-title>
    <mat-panel-description> Open Me to insert a new book </mat-panel-description>
  </mat-expansion-panel-header>
  <form class="example-form"  #form="ngForm" (ngSubmit)="saveBook()">
    <mat-form-field>
      <mat-label>Author</mat-label>
      <input 
        matInput
        id="author"
        name="author"
        type="text"
        [(ngModel)]="book.author"
        #author="ngModel"
        required
      >
      @if (author.invalid) 
      {
        <mat-error>Please enter an author</mat-error>
      }
      <!-- let author = document.getElementById("author")-->
    </mat-form-field>
    <mat-form-field>
      <mat-label>Title</mat-label>
      <input 
        matInput
        id="title"
        name="title"
        type="text"
        [(ngModel)]="book.title"
        #title="ngModel"
        required
      >
      @if (title.invalid) 
      {
        <mat-error>Please enter a title</mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>Publisher</mat-label>
      <input 
        matInput
        id="publisher"
        name="publisher"
        type="text"
        [(ngModel)]="book.publisher"
        #publisher="ngModel"
        required
      >
      @if (publisher.invalid) 
      {
        <mat-error>Please enter a publisher</mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>Date</mat-label>
      <input 
        matInput
        id="release_date"
        name="release_date"
        type="date"
        [(ngModel)]="book.release_date"
        #release_date="ngModel"
        required
      >
      @if (release_date.invalid)
      {
        <mat-error>Please a past date</mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>Price</mat-label>
      <input 
        matInput
        id="price"
        name="price"
        type="number"
        [(ngModel)]="book.price"
        #price="ngModel"
        required
        min="0"
        max="1000"
      >
      @if (price.invalid)
      {
        <mat-error>Please a valid price</mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>Cover Url</mat-label>
      <input 
        matInput
        id="imgUrl"
        name="imgUrl"
        type="text"
        [(ngModel)]="book.imgUrl"
        #imgUrl="ngModel"
        required
        pattern="^http.*\.(jpg|jpeg|png)$"
      >
      @if (imgUrl.invalid)
      {
        <mat-error>Please a valid img url</mat-error>
      }
    </mat-form-field>
  
    <button mat-fab extended type="submit" [disabled]="form.invalid">
      <mat-icon>save</mat-icon>
      Save
    </button>
  </form>
</mat-expansion-panel>